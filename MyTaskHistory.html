<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Boxicons -->
	<link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">



	<!-- My CSS -->
	<link rel="stylesheet" href="Styles/shared.css">
	<link rel="stylesheet" href="Styles/MyTaskHistory.css">

	<title>My Task History</title>
	<link rel="icon" href="img/SK logo2.png" type="image/png">

</head>

<body>


	<!-- SIDEBAR -->
	<section id="sidebar">

		<!--Logo part-->
		<a href="Home.html" class="brand">

			<img src="img/SK logo2.png" style="padding: 10px;  max-width: 30px;">
			<img class="logo" src="img/SK logo3.png">

		</a>

		<!-- menu items -->
		<ul class="side-menu top">
			<li>
				<a href="Home.html">
					<i class="bx bxs-home"> </i>
					<span class="text"> Home</span>
				</a>
			</li>
			<li>
				<a href="my_team.html">
					<i class='bx bxs-group'></i>
					<span class="text"> My Team</span>
				</a>
			</li>
			<li>
				<a href="Excellent Works.html">
					<i class='bx bx-star'></i>
					<span class="text"> Excellent Works</span>
				</a>
			</li>
			<li>
				<a href="employeeCourses.html">
					<i class="bx bx-certification"></i>
					<span class="text"> Course</span>
				</a>
			</li>
			<li>
				<a href="Vacation.html">
					<i class='bx bxs-plane-alt'></i>
					<span class="text"> Vacation</span>
				</a>
			</li>
		</ul>



		<!--log out part-->
		<ul class="side-menu">
			<li>
				<a href="login.html" class="logout">
					<i class='bx bxs-log-out-circle'></i>
					<span class="text">Logout</span>
				</a>
			</li>
		</ul>

	</section>
	<!-- SIDEBAR -->


	<!-- ------------------------------------------------------------------------------------------------------------------------- -->


	<!-- CONTENT -->
	<section id="content">

		<!-- NAVBAR -->
		<nav>
			<i class='bx bx-menu'></i>
			<div class="head-title">
				<div class="left">
					<h1>My Task History</h1>
				</div>
			</div>


			<a class="profile-link">
				<div class="nav-right">

					<!-- 1) Avatar + name -->
					<div class="profile" onclick="location.href='Profile.html'">
						<img src="img/profile.png" alt="Profile">
						<div class="username">Lama
						</div>
					</div>


					<div class="points">
						<h2>125</h2>
						<p>Points</p>
					</div>


					<div class="notification-icon" onclick="location.href='Notification.html'">
						<i class='bx bxs-bell'></i>
						<span class="badge">3</span>
					</div>


				</div>
			</a>

		</nav>
		<!-- NAVBAR -->

		<!-- MAIN -->
		<main>

			<div class="search-filter">
				<div class="input-box">
					<i class='bx bx-search'></i>
					<input type="text" placeholder="Search here..." />
					<button type="submit" class="button">Search</button>
				</div>

				<button class="sort-icon" title="Sort by points">
					<i class='bx bx-filter-alt' style="color: #6c6af1d6;"></i>
				</button>

			</div>

			<div class="stats-box">
				<div class="stat-card">
					<h3>Total Tasks</h3>
					<p>15</p>
				</div>
				<div class="stat-card">
					<h3 style="color: #fee267; border:  lch(64.47% 49.63 94.28);">Excellent Tasks</h3>
					<p>5</p>
				</div>
				<div class="stat-card">
					<h3>Total Points</h3>
					<p>125</p>
				</div>
			</div>

			<div class="dashboard">

				<div class="user-section">
					<!-- Header -->
					<div class="header">
						<p>Task</p>
						<p>State</p>
						<p>Completed Date</p>
						<p>Worked With</p>
						<p>Points</p>
					</div>

					<!-- Tasks List -->
					<ul class="list">






						<div class="month-label"> May 2025 — Total: 2 points</div>



						<li class="onProgress">
							<div class="task-info">
								<i class='bx bx-folder'></i>
								<div class="textGroup">
									<p class="task-title">Daily Stand-Up Meeting</p>
								</div>
							</div>

							<div class="task-status"> On Progress </div>

							<p>/</p>

							<div class="Worked-with">
								<img src="img/profile.png" class="profile-img" />
							</div>

							<div class="rightGroup">
								<p class="point">/</p>
								<p class="info">Points</p>
							</div>

							<div class="delete-wrapper">
								<div class="delete-area">
									<dotlottie-player id="trashAnimation"
										src="https://lottie.host/8dacfcb8-ebe4-49db-b17a-5e4d92b40edf/NYF76qNddA.lottie"
										background="transparent" speed="1" loop="false" autoplay></dotlottie-player>
								</div>
							</div>

						</li>

						<li class="late">
							<div class="task-info">
								<i class='bx bx-folder'></i>
								<div class="textGroup">
									<p class="task-title">Prototype Usability Testing</p>
								</div>
							</div>

							<div class="task-status">Late</div>

							<p>/</p>

							<div class="Worked-with">
								<img src="img/profile.png" class="profile-img"/>
								<img src="img/Nora.png" class="profile-img"/>
							</div>

							<div class="rightGroup">
								<p class="point">-1</p>
								<p class="info">Points</p>
							</div>

							<div class="delete-wrapper">
								<div class="delete-area">
									<dotlottie-player id="trashAnimation"
										src="https://lottie.host/8dacfcb8-ebe4-49db-b17a-5e4d92b40edf/NYF76qNddA.lottie"
										background="transparent" speed="1" loop="false" autoplay></dotlottie-player>
								</div>
							</div>

						</li>

						<li class="completed">
							<div class="task-info">
								<i class='bx bx-folder'></i>
								<div class="textGroup">
									<p class="task-title">Daily Stand-Up Meeting</p>
								</div>
							</div>

							<div class="task-status">Completed </div>

							<p>4 May 2025</p>

							<div class="Worked-with">
								<img src="img/profile.png" class="profile-img" />
							</div>

							<div class="rightGroup">
								<p class="point">2</p>
								<p class="info">Points</p>
							</div>

							<div class="delete-wrapper">
								<div class="delete-area">
									<dotlottie-player id="trashAnimation"
										src="https://lottie.host/8dacfcb8-ebe4-49db-b17a-5e4d92b40edf/NYF76qNddA.lottie"
										background="transparent" speed="1" loop="false" autoplay></dotlottie-player>
								</div>
							</div>

						</li>





						<div class="month-label"> April 2024 — Total: 38 points</div>








						<li class="excellent">
							<!-- Task Info -->
							<div class="task-info" data-label="Task">
								<i class='bx bx-folder'></i>
								<div class="textGroup">
									<p class="task-title">Design Proposal</p>
								</div>
							</div>

							<div class="task-status">Completed</div>


							<!-- Date -->
							<p data-label="Completed Date">7 Apr 2025</p>

							<!-- Worked With -->
							<div class="Worked-with" data-label="Worked With" id="workedWithContainer">
								<img src="img/profile.png" class="profile-img" />
								<img src="img/profile.png" class="profile-img" />
							</div>

							<!-- Points -->
							<div class="rightGroup" data-label="Points">
								<p class="point">25</p>
								<p class="info">Points</p>
							</div>

							<div class="delete-wrapper">
								<div class="delete-area">
									<dotlottie-player id="trashAnimation"
										src="https://lottie.host/8dacfcb8-ebe4-49db-b17a-5e4d92b40edf/NYF76qNddA.lottie"
										background="transparent" speed="1" loop="false" autoplay></dotlottie-player>
								</div>
							</div>

						</li>






						<li class="completed">
							<!-- Task Info -->
							<div class="task-info" data-label="Task">
								<i class='bx bx-folder'></i>
								<div class="textGroup">
									<p class="task-title">Daily Stand-Up Meeting</p>
								</div>
							</div>

							<div class="task-status">Completed</div>


							<!-- Date -->
							<p data-label="Completed Date">1 Apr 2024</p>

							<!-- Worked With -->
							<div class="Worked-with" data-label="Worked With" id="workedWithContainer">
								<img src="img/profile.png" class="profile-img" />
								<img src="img/profile.png" class="profile-img" />
							</div>

							<!-- Points -->
							<div class="rightGroup" data-label="Points">
								<p class="point">13</p>
								<p class="info">Points</p>
							</div>

							<div class="delete-wrapper">
								<div class="delete-area">
									<dotlottie-player id="trashAnimation"
										src="https://lottie.host/8dacfcb8-ebe4-49db-b17a-5e4d92b40edf/NYF76qNddA.lottie"
										background="transparent" speed="1" loop="false" autoplay></dotlottie-player>
								</div>
							</div>

						</li>




					</ul>
				</div>


			</div>

			<!-- Main Area -->















		</main>
		<!-- MAIN -->

	</section>
	<!-- CONTENT -->









	<dialog id="deleteConfirmDialog" class="delete-dialog">
		<div class="dialog-content">
			<h3>Are you sure you want to delete this task?</h3>
			<p class="warning delete">
				<i class="fas fa-exclamation-triangle"></i>
				<span>
					This action is <strong>irreversible</strong>. The task will be deleted along with all assigned
					collaborators, and they will be notified.
				</span>
			</p>
			<div class="dialog-buttons full-width">
				<button id="cancelDeleteBtn" class="cancel-btn">Cancel</button>
				<button id="confirmDeleteBtn" class="delete-btn">Delete</button>
			</div>
		</div>
	</dialog>







	<dialog id="employeeDialog">
		<button class="closeBtn"><i class='bx bxs-x-circle'></i></button>
		<div class="dialog-content">

			<div class="modal-header">


				<img src="img/profile.png" alt="profile" class="modal-avatar" />

				<div class="modal-userinfo">

					<h2 class="modal-name">Lama</h2>
					<p class="modal-role">
						<span class="modal-role-text">Jop Position</span>
						<span class="modal-status">
							<span class="modal-status-icon"><i class="fa-regular fa-clock"
									style="color: #4caf50;"></i></span>
							<span class="modal-status-text">Available</span>
						</span>
					</p>

				</div>


			</div>

			<div class="modal-body">

				<p class="modal-rank">
					<span class="modal-rank-number">5th</span>
					<span class="modal-rank-label"> on the board today</span>
				</p>
				<div class="modal-tasks">
					<strong>Shared tasks:</strong>
					<ul class="modal-tasks-list">
						<li>
							task1
						</li>
					</ul>
				</div>
			</div>


		</div>
	</dialog>




	<dialog id="fullEmployeeDialog">
		<button class="closeBtn"><i class='bx bxs-x-circle'></i></button>
		<h3>All Collaborators</h3>
		<ul class="employee-list">
			<li>
				<img src="img/profile.png" alt="Lama" class="emp-avatar profile-img" />
				<div class="emp-info">
					<span class="emp-name">Lama Ahmd</span>
				</div>
			</li>
			<li>
				<img src="img/Aaliyah.png" alt="Lama" class="emp-avatar profile-img" />
				<div class="emp-info">
					<span class="emp-name">Aliyah Badr</span>
				</div>
			</li>
			<li>
				<img src="img/Reema.png" alt="Lama" class="emp-avatar profile-img" />
				<div class="emp-info">
					<span class="emp-name">Reema Saleh</span>
				</div>
			</li>
			<li>
				<img src="img/Ali.png" alt="Lama" class="emp-avatar profile-img" />
				<div class="emp-info">
					<span class="emp-name">Ali Ahmed</span>
				</div>
			</li>
			<li>
				<img src="img/Nora.png" alt="Reema" class="emp-avatar profile-img" />
				<div class="emp-info">
					<span class="emp-name">Nora Ali</span>
				</div>
			</li>
		</ul>
	</dialog>








	<!-- =================== Scripts =================== -->
	<script src="script/script.js"></script>
	<script src="script/History.js"></script>
	<script src="https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs" type="module"></script>
	<script>


		document.querySelectorAll('.delete-wrapper').forEach(wrapper => {
			const player = wrapper.querySelector('dotlottie-player');

			wrapper.addEventListener('mouseenter', () => {
				player.stop();
				player.play();
			});
		});




		// عناصر الديالوق
		const deleteDialog = document.getElementById('deleteConfirmDialog');
		const cancelDeleteBtn = document.getElementById('cancelDeleteBtn');
		const confirmDeleteBtn = document.getElementById('confirmDeleteBtn');

		// مثال: لما تضغط على أيقونة الزبالة
		document.querySelectorAll('.delete-wrapper').forEach(btn => {
			btn.addEventListener('click', () => {
				deleteDialog.showModal();
			});
		});

		// إلغاء
		cancelDeleteBtn.addEventListener('click', () => {
			deleteDialog.close();
		});
		// إغلاق عند الضغط خارج الديالوق
		deleteDialog.addEventListener('click', (e) => {
			const rect = deleteDialog.getBoundingClientRect();
			const isInDialog =
				e.clientX >= rect.left &&
				e.clientX <= rect.right &&
				e.clientY >= rect.top &&
				e.clientY <= rect.bottom;

			if (!isInDialog) {
				deleteDialog.close();
			}
		});

		// تأكيد الحذف
		confirmDeleteBtn.addEventListener('click', () => {


			deleteDialog.close();
			showMessage("Task <span style='font-weight: bold;'>deleted </span> and collaborators notified successfully.", "success");
			// هنا تضيف كود حذف المهمة فعليًا
		});



















		document.addEventListener('DOMContentLoaded', () => {
			const allDialog = document.getElementById('fullEmployeeDialog');
			const closeBtn = allDialog?.querySelector('.closeBtn');

			// نبحث عن كل الحاويات اللي تحتوي avatars
			document.querySelectorAll('.Worked-with').forEach(container => {
				const extraCount = container.querySelector('.extra-count');

				// إذا موجود الزر اللي فيه +x
				if (extraCount) {
					extraCount.addEventListener('click', () => {
						allDialog?.showModal();
					});
				}

				
				});
			

			// زر الإغلاق
			closeBtn?.addEventListener('click', () => {
				allDialog?.close();
			});

			// ضغط خارج الديالوق
			allDialog?.addEventListener('click', e => {
				if (e.target === allDialog) allDialog.close();
			});
		});






	</script>







	<div id="messageBar" class="message-bar"></div>


</body>

</html>